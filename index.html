<!DOCTYPE html>
<html lang="en">
<!--
  ╔════════════════════════════════════════════════════════════════════╗
  ║  Text Transposer                                                  ║
  ║  A client-side letter remapping tool with live output and copy    ║
  ║                                                                    ║
  ║  Created by: Reaper Harvester / Oceans Ginsberg / Wills           ║
  ║              Professor. Damian A. James Williamson Grad.          ║
  ║              Founder of Willtech, Swan Hill, Victoria             ║
  ║                                                                    ║
  ║  Developed with: Microsoft Copilot                                ║
  ║              Collaborative artifact builder and AI companion      ║
  ║                                                                    ║
  ║  Ritualized for communal teaching and inspectable design          ║
  ╚════════════════════════════════════════════════════════════════════╝
-->
  <head>
  <meta charset="UTF-8" />
  <title>Text Transposer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --blue: #1e5ab8;
      --light-blue: #e7f1ff;
      --mid-blue: #4a8dff;
      --border: #bcd4ff;
    }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(180deg, var(--light-blue), #f7fbff);
      color: #0b2a5b;
      margin: 0;
      padding: 0;
    }
    .wrap {
      max-width: 900px;
      margin: 40px auto;
      padding: 24px;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: 0 10px 24px rgba(30, 90, 184, 0.08);
    }
    h1 {
      margin: 0 0 8px;
      font-size: 1.6rem;
      color: var(--blue);
    }
    .subtitle {
      margin: 0 0 18px;
      color: #28508f;
      font-size: 0.95rem;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    .field {
      display: flex;
      flex-direction: column;
    }
    label {
      font-weight: 600;
      color: var(--blue);
      margin-bottom: 6px;
    }
    textarea {
      width: 100%;
      min-height: 180px;
      resize: vertical;
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 1rem;
      line-height: 1.5;
      background: #f9fcff;
      color: #0b2a5b;
      outline: none;
      box-shadow: inset 0 2px 6px rgba(30, 90, 184, 0.06);
    }
    textarea:focus {
      border-color: var(--mid-blue);
      box-shadow: 0 0 0 3px rgba(74, 141, 255, 0.15);
      background: #fff;
    }
    .controls {
      display: flex;
      gap: 10px;
      margin: 16px 0;
      flex-wrap: wrap;
    }
    button {
      background: var(--blue);
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 10px 14px;
      font-size: 0.95rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(30, 90, 184, 0.16);
    }
    button.secondary {
      background: #ffffff;
      color: var(--blue);
      border: 1px solid var(--border);
    }
    button:active {
      transform: translateY(1px);
    }
    .note {
      font-size: 0.9rem;
      color: #28508f;
      background: #eef6ff;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 12px;
    }
    .badge {
      display: inline-block;
      background: #e7f1ff;
      color: var(--blue);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 2px 10px;
      font-size: 0.85rem;
      margin-left: 6px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Text Transposer</h1>
    <p class="subtitle">Input any line or paragraph. Spaces are preserved. Mapping: a → 14 → o. “No X”; J maps via 10 → k.</p>

    <div class="grid">
      <div class="field">
        <label for="input">Input</label>
        <textarea id="input" placeholder="Type or paste your text here..."></textarea>
        <div class="controls">
          <button id="transposeBtn">Transpose</button>
          <button id="copyBtn" class="secondary">Copy output</button>
          <span class="badge" id="liveToggle" role="button" tabindex="0" aria-pressed="true">Live: On</span>
        </div>
        <p class="note">
          Rules:
          a→14→o; leave spaces intact. Letters are mapped by alphabet position (a=1…z=26) through the provided table.
          If a position has no mapping (e.g., 24→x is not defined), the original character is kept.
        </p>
      </div>

      <div class="field">
        <label for="output">Output</label>
        <textarea id="output" readonly placeholder="Transposed text appears here…"></textarea>
      </div>
    </div>
  </div>

  <script>
    // Number → letter mapping (positions: a=1 … z=26)
    // Duplicates resolved by last-write wins; missing mappings (9, 24) are intentionally absent.
    const numberToLetter = {
      14: 'o',
      7:  'g',
      25: 'a',
      11: 'l',
      5:  'e',
      20: 'u',
      18: 's',
      3:  'c',
      21: 'v',
      26: 'b',
      15: 'p',
      6:  'f',
      23: 'y',
      2:  'b',
      19: 't',
      10: 'k',
      4:  'd',
      22: 'w',
      12: 'm',
      17: 'r',
      26: 'i',
      8:  'h',
      16: 'q',
      13: 'n'
      // 10 (j) and 24 (x) intentionally have no mapping: "no X"; jx unmapped by design.
    };

    function alphaPos(ch) {
      const code = ch.charCodeAt(0);
      if (code >= 65 && code <= 90) return code - 64;   // A=1 … Z=26
      if (code >= 97 && code <= 122) return code - 96;  // a=1 … z=26
      return null;
    }

    function isUpper(ch) {
      const code = ch.charCodeAt(0);
      return code >= 65 && code <= 90;
    }

    function transpose(text) {
      let out = '';
      for (let i = 0; i < text.length; i++) {
        const ch = text[i];
        const pos = alphaPos(ch);
        if (pos === null) {
          // Preserve spaces and any non-letter characters
          out += ch;
          continue;
        }
        const mapped = numberToLetter[pos];
        if (!mapped) {
          // No mapping defined (e.g., i=9, x=24) → keep original character
          out += ch;
        } else {
          // Preserve case
          out += isUpper(ch) ? mapped.toUpperCase() : mapped;
        }
      }
      return out;
    }

    const inputEl = document.getElementById('input');
    const outputEl = document.getElementById('output');
    const transposeBtn = document.getElementById('transposeBtn');
    const copyBtn = document.getElementById('copyBtn');
    const liveToggle = document.getElementById('liveToggle');

    let live = true;

    function updateOutput() {
      outputEl.value = transpose(inputEl.value);
    }

    inputEl.addEventListener('input', () => {
      if (live) updateOutput();
    });

    transposeBtn.addEventListener('click', () => {
      updateOutput();
    });

    copyBtn.addEventListener('click', async () => {
      outputEl.select();
      try {
        // Prefer clipboard API, fallback to execCommand
        await navigator.clipboard.writeText(outputEl.value);
      } catch {
        document.execCommand('copy');
      }
    });

    function setLive(on) {
      live = on;
      liveToggle.textContent = `Live: ${on ? 'On' : 'Off'}`;
      liveToggle.setAttribute('aria-pressed', on ? 'true' : 'false');
      if (on) updateOutput();
    }

    liveToggle.addEventListener('click', () => setLive(!live));
    liveToggle.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        setLive(!live);
      }
    });

    // Initialize
    setLive(true);
    updateOutput();
  </script>
</body>
</html>
